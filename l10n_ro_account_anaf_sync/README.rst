===========================
Romania - Account ANAF Sync
===========================

.. 
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! This file is generated by oca-gen-addon-readme !!
   !! changes will be overwritten.                   !!
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! source digest: sha256:a4a49c532d15e37cc80834bd83226fa50692171ef0ce63b668406b5053569b01
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

.. |badge1| image:: https://img.shields.io/badge/maturity-Mature-brightgreen.png
    :target: https://odoo-community.org/page/development-status
    :alt: Mature
.. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
    :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
    :alt: License: AGPL-3
.. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fl10n--romania-lightgray.png?logo=github
    :target: https://github.com/OCA/l10n-romania/tree/16.0/l10n_ro_account_anaf_sync
    :alt: OCA/l10n-romania
.. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
    :target: https://translation.odoo-community.org/projects/l10n-romania-16-0/l10n-romania-16-0-l10n_ro_account_anaf_sync
    :alt: Translate me on Weblate
.. |badge5| image:: https://img.shields.io/badge/runboat-Try%20me-875A7B.png
    :target: https://runboat.odoo-community.org/builds?repo=OCA/l10n-romania&target_branch=16.0
    :alt: Try me on Runboat

|badge1| |badge2| |badge3| |badge4| |badge5|

This module will make posible to send e-invoice / e-transport to Romanian goverment anaf.ro.

To use this module you must have a digital signature usb token from Romania connected with a ANAF account.

**Table of contents**

.. contents::
   :local:

Installation
============

To install this module, you need to:

* clone the branch 14.0 of the repository https://github.com/OCA/l10n-romania
* add the path to this repository in your configuration (addons-path)
* update the module list
* search for "Romania - Account ANAF Sync" in your addons
* install the module

Configuration
=============

1. Go to https://pfinternet.anaf.ro/my.policy put put your username and password and code that came on email (or create a new user if you do not have)

2. Go to "Editare profil Oauth"

3. At profile Oauth

   - put some text at "Denumire Aplicatie"
   - at callback URL 1 put your Odoo instance url: /l10n_ro_account_anaf_sync/anaf_oauth
   - (if you odoo site is https://odoo.zzz.ro you must put https://odoo.zzz.ro/l10n_ro_account_anaf_sync/anaf_oauth url shown also in odoo company e-invoice tab)
   - at Serviciu check e-factura and/or e-transport
   - press Generare Client ID

4. Copy the Client ID and Client Secret.

5. Go to Odoo instance and from Settings -> Romania -> Configure ANAF sync create a new record for each company that you have access on ANAF website.

6. From a computer that can connect to anaf.ro and login with digital signature.

    With the usb Token inserted press in Odoo the button Get Token from Anaf.
    It will ask you for usb token pin.
    You will get a error or a token and a new valability date
    If the ANAF website is not asking for a pin you must open and close your browser to ask you again the signature token pin

7. If you do not have errors press the test button and all should be ok.

8. The access token can be used also to test in other ways like

.. code-block:: shell

    > curl "https://api.anaf.ro/TestOauth/jaxrs/hello?name=bbb" -H "Authorization: Bearer a010f5e7dd3e44d114d73729419bd1b9968b92fe2015f0512dcZZZZZZZZ" -i Future

Info:

  https://www.anaf.ro/anaf/internet/ANAF/servicii_online/servicii_web_anaf/!ut/p/a1/hY9NC4JAEIZ_SwevzqRp1k2h3CQojUj3Eiv4FbYrq-nfT8NDRNncZnge3nmBQgiUs7bIWFMIzsphp-aVzIlJNEvzMNAt9A1nu3FWJ3QPyx6IegB_jI0fPvFx8HeB4R4R3cXoTwB_8i9AJyPQHIGJFz2gWSniV93I5rFuZUBlkiYykepD9ue8aap6raCCXdepjLNUlULBb3wu6gbCNwyq-znEm1G2e3v2BHB2faQ!/dl5/d5/L2dBISEvZ0FBIS9nQSEh/

  https://mfinante.gov.ro/web/efactura/informatii-tehnice

  https://docs.peppol.eu/poacc/billing/3.0/syntax/ubl-invoice/

Bug Tracker
===========

Bugs are tracked on `GitHub Issues <https://github.com/OCA/l10n-romania/issues>`_.
In case of trouble, please check there if your issue has already been reported.
If you spotted it first, help us to smash it by providing a detailed and welcomed
`feedback <https://github.com/OCA/l10n-romania/issues/new?body=module:%20l10n_ro_account_anaf_sync%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.

Do not contact contributors directly about support or help with technical issues.

Credits
=======

Authors
~~~~~~~

* NextERP Romania

Contributors
~~~~~~~~~~~~

* `NextERP Romania <https://www.nexterp.ro>`_:

  * Fekete Mihai <feketemihai@nexterp.ro>


Do not contact contributors directly about support or help with technical issues.

Maintainers
~~~~~~~~~~~

This module is maintained by the OCA.

.. image:: https://odoo-community.org/logo.png
   :alt: Odoo Community Association
   :target: https://odoo-community.org

OCA, or the Odoo Community Association, is a nonprofit organization whose
mission is to support the collaborative development of Odoo features and
promote its widespread use.

.. |maintainer-feketemihai| image:: https://github.com/feketemihai.png?size=40px
    :target: https://github.com/feketemihai
    :alt: feketemihai

Current `maintainer <https://odoo-community.org/page/maintainer-role>`__:

|maintainer-feketemihai| 

This module is part of the `OCA/l10n-romania <https://github.com/OCA/l10n-romania/tree/16.0/l10n_ro_account_anaf_sync>`_ project on GitHub.

You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
