<?xml version="1.0" encoding="utf-8" ?>
<odoo>

    <template id="l10n_ro_report_trial_balance.trial_balance">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="account_financial_report.internal_layout">
                    <t
                        t-call="l10n_ro_report_trial_balance.l10n_ro_report_trial_balance_base"
                    />
                </t>
            </t>
        </t>
    </template>

    <template id="l10n_ro_report_trial_balance.l10n_ro_report_trial_balance_base">
        <!-- Saved flag fields into variables, used to define columns display -->
        <t t-set="show_partner_details" t-value="show_partner_details" />
        <t t-set="foreign_currency" t-value="foreign_currency" />
        <t t-set="show_hierarchy_level" t-value="show_hierarchy_level" />
        <t t-set="limit_hierarchy_level" t-value="limit_hierarchy_level" />
        <!-- Defines global variables used by internal layout -->
        <t t-set="title">Trial Balance</t>
        <t t-set="company_name" t-value="Company_Name" />
        <div class="page data_table">
            <div class="row">
                <h4
                    class="mt0"
                    t-esc="title or 'Odoo Report'"
                    style="text-align: center;"
                />
            </div>
            <!-- Display filters -->
            <t t-call="account_financial_report.report_trial_balance_filters" />
            <div class="page_break" />

            <!-- Display account lines -->
            <div class="act_as_table data_table" style="width: 100% !important;">
                <!-- Display account header -->
                <t
                    t-call="l10n_ro_report_trial_balance.l10n_ro_report_trial_balance_lines_header"
                />
                <!-- Display each lines -->
                <t t-foreach="trial_balance" t-as="balance">
                    <!-- Adapt -->
                    <t t-set="style" t-value="'font-size:12px;  padding: 1px'" />
                    <t t-if="hierarchy_on == 'none'">
                        <t
                            t-call="l10n_ro_report_trial_balance.l10n_ro_report_trial_balance_line"
                        />
                    </t>
                    <t t-if="hierarchy_on == 'computed'">
                        <t t-if="balance['type'] == 'group_type'">
                            <t
                                t-set="style"
                                t-value="'font-size:14px; padding:7px; text-align:center; font-weight: bold; color: blue;'"
                            />
                            <t
                                t-call="l10n_ro_report_trial_balance.l10n_ro_report_trial_balance_line"
                            />
                        </t>
                        <t t-if="balance['type'] == 'account_type'">
                            <t
                                t-call="l10n_ro_report_trial_balance.l10n_ro_report_trial_balance_line"
                            />
                        </t>
                    </t><t t-if="hierarchy_on == 'relation'">
                        <t t-if="balance['type'] == 'group_type'">
                            <t
                                t-set="style"
                                t-value="'font-size:14px; padding:7px; text-align:center; color: blue;'"
                            />
                            <t
                                t-call="l10n_ro_report_trial_balance.l10n_ro_report_trial_balance_line"
                            />
                        </t>
                        <t t-if="balance['type'] == 'account_type'">
                            <t t-if="limit_hierarchy_level">
                                <t t-if="show_hierarchy_level > balance['level']">
                                    <t
                                        t-call="l10n_ro_report_trial_balance.l10n_ro_report_trial_balance_line"
                                    />
                                </t>
                            </t>
                            <t t-if="not limit_hierarchy_level">
                                <t
                                    t-call="l10n_ro_report_trial_balance.l10n_ro_report_trial_balance_line"
                                />
                            </t>
                        </t>
                    </t>
                </t>
            </div>
        </div>
    </template>

    <template
        id="l10n_ro_report_trial_balance.l10n_ro_report_trial_balance_lines_header"
    >
        <!-- Display table headers for lines -->
        <div class="act_as_thead">
            <div class="act_as_row labels">
                <!--## Code-->
                <div class="act_as_cell" style="width: 5%;">Code</div>
                <!--## Account-->
                <div class="act_as_cell" style="width: 20%;">Account</div>
                <!--## Opening Debit-->
                <div class="act_as_cell" style="width: 7%;">Opening Debit</div>
                <!--## Opening Credit-->
                <div class="act_as_cell" style="width: 7%;">Opening Credit</div>
                <!--## Initial balance-->
                <div class="act_as_cell" style="width: 7%;">Initial debit</div>
                <!--## Initial balance-->
                <div class="act_as_cell" style="width: 7%;">Initial credit</div>
                <!--## Current Debit-->
                <div class="act_as_cell" style="width: 7%;">Current Debit</div>
                <!--## Current Credit-->
                <div class="act_as_cell" style="width: 7%;">Current Credit</div>
                <!--## Total Debit-->
                <div class="act_as_cell" style="width: 7%;">Total Debit</div>
                <!--## Total Credit-->
                <div class="act_as_cell" style="width: 7%;">Total Credit</div>
                <!--## Balance Debit-->
                <div class="act_as_cell" style="width: 7%;">Balance Debit</div>
                <!--## Balance Credit-->
                <div class="act_as_cell" style="width: 7%;">Balance Credit</div>
            </div>
        </div>
    </template>

    <template id="l10n_ro_report_trial_balance.l10n_ro_report_trial_balance_line">
        <!-- # line -->

        <div class="act_as_row lines">
            <t t-if="balance['type'] == 'group_type'">
                <t t-set="res_model" t-value="'account.account'" />
                <t t-set="res_id" t-value="balance['id']" />
                <t t-set="accounts" t-value="[balance['id']]" />
            </t>
            <t t-if="balance['type'] == 'group_type'">
                <t t-set="res_model" t-value="'account.group'" />
                <t t-set="res_id" t-value="balance['id']" />
                <t t-set="accounts" t-value="balance['account_ids']" />
            </t>
            <t t-if="len(balance['code']) == 1">
                <t t-set="style" t-value="style +'font-weight: bold'" />
            </t>
            <!--## Code-->
            <div class="act_as_cell left">
                <span>
                    <a
                        t-att-data-active-id="res_id"
                        t-att-data-res-model="res_model"
                        class="o_account_financial_reports_web_action_monetary_multi"
                        t-att-style="style"
                    >
                        <t t-att-style="style" t-raw="balance['code']" /></a>
                </span>
            </div>
            <!--## Account-->
            <div class="act_as_cell left">
                <span>
                    <a
                        t-att-data-active-id="res_id"
                        t-att-data-res-model="res_model"
                        class="o_account_financial_reports_web_action_monetary_multi"
                        t-att-style="style"
                    >
                        <t t-att-style="style" t-raw="balance['name']" /></a>
                </span>
            </div>
            <!--## Opening Debit-->
            <div class="act_as_cell amount">
                <t
                    t-set="domain"
                    t-value="[('account_id', 'in', accounts),
                              ('date', '&lt;', firstdate),
                              ('debit', '&lt;&gt;', 0)]"
                />
                <span>
                    <a
                        t-att-data-res-model="'account.move.line'"
                        t-att-data-domain="domain"
                        t-att-style="style"
                        class="o_account_financial_reports_web_action_monetary_multi"
                    >
                    <t
                            t-att-style="style"
                            t-raw="balance['debit_opening']"
                            t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"
                        /></a>
                </span>
            </div>
            <!--## Opening Credit-->
            <div class="act_as_cell amount">
                <t
                    t-set="domain"
                    t-value="[('account_id', 'in', accounts),
                                ('date', '&lt;', firstdate),
                                ('credit', '&lt;&gt;', 0)]"
                />
                <span>
                    <a
                        t-att-data-res-model="'account.move.line'"
                        t-att-data-domain="domain"
                        t-att-style="style"
                        class=""
                    >
                    <t
                            t-att-style="style"
                            t-raw="balance['credit_opening']"
                            t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"
                        /></a>
                </span>
            </div>
            <!--## Initial debit-->
            <div class="act_as_cell amount">
                <t
                    t-set="domain"
                    t-value="[('account_id', 'in', accounts),
                                            ('date', '&gt;=', firstdate),
                                            ('date', '&lt;', date_from),
                                            ('debit', '&lt;&gt;', 0)]"
                />
                <span>
                    <a
                        t-att-data-res-model="'account.move.line'"
                        t-att-data-domain="domain"
                        t-att-style="style"
                        class="o_account_financial_reports_web_action_monetary_multi"
                    >
                    <t
                            t-att-style="style"
                            t-raw="balance['debit_initial']"
                            t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"
                        /></a>
                </span>
            </div>
            <!--## Initial credit-->
            <div class="act_as_cell amount">
                <t
                    t-set="domain"
                    t-value="[('account_id', 'in', accounts),
                                            ('date', '&gt;=', firstdate),
                                            ('date', '&lt;', date_from),
                                            ('credit', '&lt;&gt;', 0)]"
                />
                <span>
                    <a
                        t-att-data-res-model="'account.move.line'"
                        t-att-data-domain="domain"
                        t-att-style="style"
                        class="o_account_financial_reports_web_action_monetary_multi"
                    >
                    <t
                            t-att-style="style"
                            t-raw="balance['credit_initial']"
                            t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"
                        /></a>
                </span>
            </div>
            <!--## Current Debit-->
            <div class="act_as_cell amount">
                <t
                    t-set="domain"
                    t-value="[('account_id', 'in', accounts),
                                            ('date', '&gt;=', date_from),
                                            ('date', '&lt;=', date_to),
                                            ('debit', '&lt;&gt;', 0)]"
                />
                <span>
                    <a
                        t-att-data-res-model="'account.move.line'"
                        t-att-data-domain="domain"
                        t-att-style="style"
                        class="o_account_financial_reports_web_action_monetary_multi"
                    >
                    <t
                            t-att-style="style"
                            t-raw="balance['debit']"
                            t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"
                        /></a>
                </span>
            </div>
            <!--## Current Credit-->
            <div class="act_as_cell amount">
                <t
                    t-set="domain"
                    t-value="[('account_id', 'in', accounts),
                                            ('date', '&gt;=', date_from),
                                            ('date', '&lt;=', date_to),
                                            ('credit', '&lt;&gt;', 0)]"
                />
                <span>
                    <a
                        t-att-data-res-model="'account.move.line'"
                        t-att-data-domain="domain"
                        t-att-style="style"
                        class="o_account_financial_reports_web_action_monetary_multi"
                    >
                    <t
                            t-att-style="style"
                            t-raw="balance['credit']"
                            t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"
                        /></a>
                </span>
            </div>
            <!--## Total Debit-->
            <div class="act_as_cell amount">
                <t
                    t-set="domain"
                    t-value="[('account_id', 'in', accounts),
                                ('debit', '&lt;&gt;', 0)]"
                />
                <span>
                    <a
                        t-att-data-res-model="'account.move.line'"
                        t-att-data-domain="domain"
                        t-att-style="style"
                        class="o_account_financial_reports_web_action_monetary_multi"
                    >
                    <t
                            t-att-style="style"
                            t-raw="balance['debit_total']"
                            t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"
                        /></a>
                </span>
            </div>
            <!--## Total Credit-->
            <div class="act_as_cell amount">
                <t
                    t-set="domain"
                    t-value="[('account_id', 'in', accounts),
                                ('credit', '&lt;&gt;', 0)]"
                />
                <span>
                    <a
                        t-att-data-res-model="'account.move.line'"
                        t-att-data-domain="domain"
                        t-att-style="style"
                        class="o_account_financial_reports_web_action_monetary_multi"
                    >
                    <t
                            t-att-style="style"
                            t-raw="balance['credit_total']"
                            t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"
                        /></a>
                </span>
            </div>
            <!--## Balance Debit-->
            <div class="act_as_cell amount">
                <t t-set="domain" t-value="[('account_id', 'in', accounts)]" />
                <span>
                    <a
                        t-att-data-res-model="'account.move.line'"
                        t-att-data-domain="domain"
                        t-att-style="style"
                        class="o_account_financial_reports_web_action_monetary_multi"
                    >
                    <t
                            t-att-style="style"
                            t-raw="balance['debit_balance']"
                            t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"
                        /></a>
                </span>
            </div>
            <!--## Balance Credit-->
            <div class="act_as_cell amount">
                <t t-set="domain" t-value="[('account_id', 'in', accounts)]" />
                <span>
                    <a
                        t-att-data-res-model="'account.move.line'"
                        t-att-data-domain="domain"
                        t-att-style="style"
                        class="o_account_financial_reports_web_action_monetary_multi"
                    >
                    <t
                            t-att-style="style"
                            t-raw="balance['credit_balance']"
                            t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"
                        /></a>
                </span>
            </div>
        </div>
    </template>

</odoo>
